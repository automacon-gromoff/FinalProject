# Система управления библиотекой
***
## Краткое описание:
Это тестовое задание для обучающихся Go: реализация REST API на Go для управления
коллекцией книг и авторами, которые их пишут.

API выполняет операции CRUD с книгами и авторами, хранящимися в базе данных PostgreSQL.
Система контейнеризирована с помощью Docker, состоящего из двух отдельных
контейнеров: одного для веб-приложения и одного для базы данных.
***
## Требования для запуска:
1. GO-компилятор: https://go.dev/
2. Контейнеризатор приложений Docker: https://www.docker.com/
***
## Сборка и запуск:
- Сборка приложения
```shell
make build
```
- Запуск всех контейнеров
```shell
make up
```
- Запуск всех остановленных контейнеров
```shell
make run
```
- Остановка всех контейнеров без их удаления
```shell
make stop
```
- Остановка и удаление всех контейнеров
```shell
make down
```
- Отображение списка запущенных контейнеров и их статусов
```shell
make ps
```
- Просмотр логов приложения
```shell
make logs
```
***
## Реализованные RESTful эндпоинты:
### Книги:
- **POST http://localhost:8000/api/books** - *Добавляет новую книгу*<br><br>
Пример тела обращения:
```json
{
    "name": "Самая лучшая книга",
    "author_id": 1,
    "publishing_year": 1985,
    "isbn": "2-266-11156-1"
}
```
Пример ответа:
```json
{
  "id": 1
}
```
- **GET http://localhost:8000/api/books** - *Получает все книги*<br>
Тело запроса отсутствует<br>
Пример ответа:
```json
{
  "books": [
    {
      "id": 1,
      "name": "Самая лучшая книга",
      "author_id": 1,
      "publishing_year": 1985,
      "isbn": "2-266-11156-1"
    },
    {
      "id": 2,
      "name": "Самая худшая книга",
      "author_id": 3,
      "publishing_year": 2001,
      "isbn": "2-266-59874-7"
    }
  ]
}
```
- **GET http://localhost:8000/api/books/{id}** - *Получает книгу по её идентификатору*<br>
Тело запроса отсутствует<br>
Пример ответа:
```json
{
  "id": 1,
  "name": "Самая лучшая книга",
  "author_id": 1,
  "publishing_year": 1985,
  "isbn": "2-266-11156-1"
}
```
- **PUT http://localhost:8000/api/books{id}** - *Обновляет книгу по её идентификатору*<br>
Пример тела запроса:
```json
{
    "name" : "Самая худшая книга",
    "author_id" : 3,
    "year": 2001,
    "isbn": "2-266-59874-7"
} 
```
Пример ответа:
```json
{
    "status": "ok"
}
```
- **DELETE http://localhost:8000/api/books{id}** - *Удаляет книгу по её идентификатору*<br>
Тело запроса отсутствует<br>
Пример ответа:
```json
{
    "status": "ok"
}
```
***
### Авторы:
- **POST http://localhost:8000/api/authors** - *Добавляет нового автора*<br>
Пример тела обращения:
```json
{
  "name":"Ушат",
  "surname":"Помоев",
  "biography":"Ел, пил, курил...",
  "born_date":"1974-07-11"
}
```
Пример ответа:
```json
{
  "id": 1
}
```
- **GET http://localhost:8000/api/authors** - *Получает всех авторов*<br>
Тело запроса отсутствует<br>
Пример ответа:
```json
{
  "books": [
    {
      "id": 1,
      "name": "Самая лучшая книга",
      "author_id": 1,
      "publishing_year": 1985,
      "isbn": "2-266-11156-1"
    },
    {
      "id": 2,
      "name": "Самая худшая книга",
      "author_id": 3,
      "publishing_year": 2001,
      "isbn": "2-266-59874-7"
    }
  ]
}
```
- **GET http://localhost:8000/api/authors/{id}** - *Получает автора по его идентификатору*<br>
Тело запроса отсутствует<br>
Пример ответа:
```json
{
    "id": 2,
    "name": "Рулон",
    "surname": "Обоев",
    "biography": "Жил, жив и будет жить",
    "born_date": "1987-09-02T00:00:00Z"
}
```
- **PUT http://localhost:8000/api/authors{id}** - *Обновляет автора по его идентификатору*<br>
  Пример тела запроса:
```json
{
  "name": "Ушат",
  "surname": "Помоев",
  "biography": "Ел, пил, курил...",
  "born_date": "1974-07-11"
}
```
Пример ответа:
```json
{
    "status": "ok"
}
```
- **DELETE http://localhost:8000/api/authors{id}** - *Удаляет автора по его идентификатору*<br>
Тело запроса отсутствует<br>
Пример ответа:
```json
{
    "status": "ok"
}
```
***
### Книги и авторы:
- **GET http://localhost:8000/api/books{id}/authors/{id}** - *Одновременно обновить сведения о книге и авторе*<br>
  Пример тела запроса:
```json
{
    "name": "Так себе книга",
    "biography": "С трудом выдавил из себя книгу: Так себе книга"
}
```
Пример ответа:
```json
{
    "status": "ok"
}
```


